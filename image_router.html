<!doctype html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>image_router</title>

	<link rel="stylesheet" media="all" href="image_router.css"/>

	<script type="text/javascript">
		(function(){
			window['CLARITY'] = [];
			var ns = document.createElement('script'), s = document.getElementsByTagName('script')[0];
			ns.async = true; ns.type = 'text/javascript'; ns.src = '//lib.spinmedia.com/clarity.min.js'; s.parentNode.insertBefore(ns, s);
		})();
	</script>
</head>

<body>
	<script type="text/html" id="template">
		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>
	</script>

	<div id="master">
		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

		<article class="clearfix">
			<div class="thumb">
				<meta name="image:full" content="//sb-129.net/image/100x75/ff0000"/>
				<meta name="image:tablet" content="//sb-129.net/image/200x300/00ff00"/>
				<meta name="image:phone" content="//sb-129.net/image/320x250/00ffff"/>
			</div><!-- /.thumb -->

			<h2>This is a headline.</h2> 
		</article>

	</div><!-- /#master -->

	<script type="text/javascript">
		CLARITY.push({
			use: ['jquery', 'doubleunderscore', 'plugin'],
			run: function($, __, plugin) {
				plugin.loadModule('image_router.js', {
					use: ['image_router'],
					run: function(ImageRouter){
						ImageRouter.processElement(document.getElementById('master'));

						var $master = $('#master');
						var comp_template = __.template(document.getElementById('template').innerHTML);
						$master.on('click', function(e){
							var div = document.createElement('div');
							div.innerHTML = comp_template();
							ImageRouter.processElement(div);
							$master.append(div);
						});
					}
				});
			}
		});			
	</script>
</body>
</html>

